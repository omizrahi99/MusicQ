{"ast":null,"code":"var _jsxFileName = \"/Users/gautam/Desktop/cs/48/project-s1-t1-music-queue/pages/App.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport Layout from \"../components/Layout\";\nimport Results from \"../components/Results\";\nimport Input from \"../components/Input\";\nconst spotifySearchURL = \"https://api.spotify.com/v1/search?q=\";\nconst spotifyProfileURL = \"https://api.spotify.com/v1/me?access_token=\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      if (window.location.href.indexOf(\"_token\") == -1) {\n        Router.push(\"/Login\");\n      }\n\n      console.log(\"cdm ran\");\n    });\n\n    _defineProperty(this, \"submitTrackForm\", event => {\n      event.preventDefault();\n      const {\n        search_term\n      } = this.state;\n      const {\n        access_token\n      } = this.props.url.query;\n\n      if (search_term != \"\") {\n        fetch(`${spotifySearchURL}${search_term}&type=track&access_token=${access_token}`).then(response => response.json()).then(json => {\n          this.setState({\n            tracks: json.tracks.items\n          });\n          return json.tracks;\n        });\n      }\n    });\n\n    _defineProperty(this, \"renderSearchResults\", () => {\n      if (this.state.tracks.length > 1) {\n        const {\n          tracks\n        } = this.state;\n        const {\n          access_token\n        } = this.props.url.query;\n        let allResults = [];\n        tracks.forEach((track, index) => {\n          if (track.album != undefined && track.album.images[0] != undefined) {\n            let hasImage = track.album.images[0];\n            allResults.push(__jsx(Results, {\n              key: track.id,\n              imageURL: hasImage.url,\n              name: track.name,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 13\n              }\n            }, __jsx(Link, {\n              href: `/track-albums?id=${track.id}&access_token=${access_token}`,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 15\n              }\n            }, __jsx(\"a\", {\n              className: \"text-muted\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 17\n              }\n            }, \"View \", track.name, \" albums\"))));\n          }\n        });\n        return allResults;\n      } else {\n        return \"\";\n      }\n    });\n\n    this.state = {\n      search_term: \"\",\n      tracks: []\n    };\n    this.submitTrackForm = this.submitTrackForm.bind(this);\n    this.renderSearchResults = this.renderSearchResults.bind(this);\n  }\n\n  render() {\n    console.log(\"this.state\", this.state);\n    const {\n      user\n    } = this.props;\n    return __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, __jsx(Input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }), __jsx(\"div\", {\n      className: \"row mt-5 justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, \"Welcome \", user.display_name.split(\" \")[0], \"!\")), __jsx(\"div\", {\n      className: \"row mt-5 justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, this.state.tracks.length > 1 ? `Search results for \"${this.state.search_term}\"` : \"Search the Spotify API for your favorite track\")), __jsx(\"div\", {\n      className: \"row mt-5 justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, __jsx(\"form\", {\n      onSubmit: event => this.submitTrackForm(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      className: \"form-control text-center\",\n      placeholder: \"enter track name\",\n      onChange: event => this.setState({\n        search_term: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"form-control btn btn-outline-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, \"Search\")))), __jsx(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, this.renderSearchResults()));\n  }\n\n}\n\nApp.getInitialProps = async function (context) {\n  const {\n    access_token\n  } = context.query;\n  const res = await fetch(spotifyProfileURL + access_token);\n  const user = await res.json();\n  return {\n    user\n  };\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/gautam/Desktop/cs/48/project-s1-t1-music-queue/pages/App.js"],"names":["React","Component","fetch","Router","Link","Layout","Results","Input","spotifySearchURL","spotifyProfileURL","App","constructor","props","window","location","href","indexOf","push","console","log","event","preventDefault","search_term","state","access_token","url","query","then","response","json","setState","tracks","items","length","allResults","forEach","track","index","album","undefined","images","hasImage","id","name","submitTrackForm","bind","renderSearchResults","render","user","display_name","split","target","value","getInitialProps","context","res"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport Layout from \"../components/Layout\";\nimport Results from \"../components/Results\";\nimport Input from \"../components/Input\";\n\nconst spotifySearchURL = \"https://api.spotify.com/v1/search?q=\";\nconst spotifyProfileURL = \"https://api.spotify.com/v1/me?access_token=\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search_term: \"\",\n      tracks: []\n    };\n    this.submitTrackForm = this.submitTrackForm.bind(this);\n    this.renderSearchResults = this.renderSearchResults.bind(this);\n  }\n\n  componentDidMount = () => {\n    if (window.location.href.indexOf(\"_token\") == -1) {\n      Router.push(\"/Login\");\n    }\n    console.log(\"cdm ran\");\n  };\n\n  submitTrackForm = event => {\n    event.preventDefault();\n    const { search_term } = this.state;\n    const { access_token } = this.props.url.query;\n\n    if (search_term != \"\") {\n      fetch(\n        `${spotifySearchURL}${search_term}&type=track&access_token=${access_token}`\n      )\n        .then(response => response.json())\n        .then(json => {\n          this.setState({ tracks: json.tracks.items });\n          return json.tracks;\n        });\n    }\n  };\n\n  renderSearchResults = () => {\n    if (this.state.tracks.length > 1) {\n      const { tracks } = this.state;\n      const { access_token } = this.props.url.query;\n      let allResults = [];\n      tracks.forEach((track, index) => {\n        if (track.album != undefined && track.album.images[0] != undefined) {\n          let hasImage = track.album.images[0];\n          allResults.push(\n            <Results key={track.id} imageURL={hasImage.url} name={track.name}>\n              <Link\n                href={`/track-albums?id=${track.id}&access_token=${access_token}`}\n              >\n                <a className=\"text-muted\">View {track.name} albums</a>\n              </Link>\n            </Results>\n          );\n        }\n      });\n      return allResults;\n    } else {\n      return \"\";\n    }\n  };\n\n  render() {\n    console.log(\"this.state\", this.state);\n    const { user } = this.props;\n    return (\n      <Layout>\n        <Input />\n        <div className=\"row mt-5 justify-content-center\">\n          <h3>Welcome {user.display_name.split(\" \")[0]}!</h3>\n        </div>\n        <div className=\"row mt-5 justify-content-center\">\n          <h3>\n            {this.state.tracks.length > 1\n              ? `Search results for \"${this.state.search_term}\"`\n              : \"Search the Spotify API for your favorite track\"}\n          </h3>\n        </div>\n        <div className=\"row mt-5 justify-content-center\">\n          <form onSubmit={event => this.submitTrackForm(event)}>\n            <div className=\"form-group\">\n              <input\n                type=\"text\"\n                className=\"form-control text-center\"\n                placeholder=\"enter track name\"\n                onChange={event =>\n                  this.setState({ search_term: event.target.value })\n                }\n              />\n            </div>\n            <div className=\"form-group\">\n              <button\n                type=\"submit\"\n                className=\"form-control btn btn-outline-success\"\n              >\n                Search\n              </button>\n            </div>\n          </form>\n        </div>\n        <div className=\"row mt-5\">{this.renderSearchResults()}</div>\n      </Layout>\n    );\n  }\n}\n\nApp.getInitialProps = async function(context) {\n  const { access_token } = context.query;\n  const res = await fetch(spotifyProfileURL + access_token);\n  const user = await res.json();\n  return {\n    user\n  };\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}