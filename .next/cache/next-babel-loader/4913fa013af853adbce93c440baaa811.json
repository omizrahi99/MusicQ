{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport Router from 'next/router'; //import './login.css';\n\nexport const authEndpoint = 'https://accounts.spotify.com/authorize'; // Replace with your app's client ID, redirect URI and desired scopes\n\nconst clientId = process.env.CLIENT_ID;\nconst redirectUri = process.env.REDIRECT_URI;\nconst scopes = [\"user-read-currently-playing\", \"user-read-playback-state\"];\nexport const spotifyWebApiURL = `https://accounts.spotify.com/authorize/?client_id=${clientId}&response_type=token&redirect_uri=${redirectUri}&scope=${scopes}`;\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      let url = window.location.href;\n\n      if (url.indexOf('_token') > -1) {\n        let access_token = url.split('_token=')[1].split(\"&\")[0].trim();\n        this.setState({\n          access_token\n        });\n      }\n    });\n\n    _defineProperty(this, \"makeSpotifyCall\", event => {\n      event.preventDefault();\n      const {\n        access_token\n      } = this.state;\n\n      if (access_token === '') {\n        document.location = spotifyWebApiURL;\n      } else {\n        Router.push({\n          pathname: '/User',\n          query: {\n            access_token\n          }\n        });\n      }\n    });\n\n    this.state = {\n      access_token: ''\n    };\n  }\n\n  render() {\n    const styles = {\n      border: \"0.2em solid #1ecd97\",\n      textAlign: \"center\",\n      display: \"inline-block\",\n      fontSize: \"16px\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"2em\",\n      color: \"#1ecd97\",\n      cursor: \"pointer\",\n      fontSize: \"3vmin\",\n      padding: \"0.7em 1.5em\",\n      textTransform: \"uppercase\",\n      transition: \"all 0.25s ease\"\n    };\n    const {\n      access_token\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"Login\",\n      style: {\n        textAlign: \"center\"\n      }\n    }, __jsx(\"h3\", null, access_token !== '' ? 'You are logged in' : \"Please Log in \"), __jsx(\"header\", {\n      className: \"Login-header\"\n    }, __jsx(\"button\", {\n      onClick: event => this.makeSpotifyCall(event),\n      className: \"btn btn--Login-link\",\n      style: styles\n    }, access_token !== '' ? 'Make a Room' : 'Login to Spotify')));\n  }\n\n}\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}